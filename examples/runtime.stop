start A {
    string test1
    -> B
}

start Z {
    -> Y
}

GetDynamicText <- string {
    string test2
    string layout <- GetLayout
}

GetLayout <- string {

}

Configuration {
    string host
}

GetConfiguration <- Configuration {

}

GetDownloadURL <- string {
    string filename
    Configuration configuration <- GetConfiguration
}

Post {
    enum Status {
        DRAFT
        PUBLISHED
    }
    string title
    optional Status status
    optional string filename
    optional string url <- GetDownloadURL
}

async GetPosts <- [Post] throws DatabaseError {
    timeout 10 -> GetPostsTimeoutError
}

async GetTimedOutPosts <- [Post] throws DatabaseError {
    timeout 1 -> GetTimedOutPostsError
}

async GetFilteredPosts <- [Post] throws DatabaseError {
    string filter
    timeout 10 -> GetFilteredPostsTimeoutError
}

stop DatabaseError {

}

stop TimeoutError {

}

stop GetPostsTimeoutError {
    GetPosts timedOutState
}

stop GetFilteredPostsTimeoutError {
    GetFilteredPosts timedOutState
}

stop GetTimedOutPostsError {
}

B {
    string test2
    string dynamicText <- GetDynamicText
    [Post] posts <- GetPosts
    optional string query
    optional [Post] filteredPosts <- GetFilteredPosts(filter: query)
    optional Wow combine <- Combine
    optional string again <- CombineAgain
    -> C
}

Wow {
    string name
}

async Combine <- Wow {
    string dynamicText
    optional [Post] filteredPosts
    timeout 30 -> TimeoutError
}

async CombineAgain <- string {
    [Post] posts
    optional Wow combine
    timeout 30 -> TimeoutError
}

Y {
    [Post] posts <- GetTimedOutPosts
    -> C
}

stop C {
    string test3
}

Iso {

}